{"version":3,"sources":["common/Yup.ts","common/vouDeVanApi.js","components/AppInput.tsx","components/AppAlert.tsx","common/AlertModel.ts","common/handleAxiosError.ts","components/AppPageLoading.tsx","common/polyfill.js","components/AppInputGroup.tsx","pages/Login.tsx","domain/auth/Login.ts","App.tsx","index.ts","domain/auth/Auth.ts"],"names":["Yup","mixed","required","string","min","max","email","array","number","integer","vouDeVanApi","axios","create","baseURL","headers","interceptors","request","use","config","Auth","instance","isAuthenticated","Authorization","token","AppInput","id","mask","dataTestId","props","useField","field","meta","hasError","touched","error","data-testid","inputProps","invalid","AppAlert","alertModel","color","message","alertFromAxiosError","handleAxiosError","messageErrors","Set","add","isAxiosError","undefined","response","has","status","data","defaultHandler","AppPageLoading","className","window","CustomEvent","event","params","bubbles","cancelable","detail","evt","document","createEvent","initCustomEvent","prototype","Event","AppInputGroup","icon","InputGroup","InputGroupAddon","addonType","InputGroupText","validationSchema","object","shape","password","Login","history","useHistory","location","useLocation","useState","setAlertModel","Container","Row","Col","md","CardGroup","Card","CardBody","LoginFormView","initialValues","onSubmit","loginFormModel","setSubmitting","post","then","postLogin","from","state","pathname","replace","catch","e","handleSubmit","isSubmitting","Form","type","name","maxLength","label","xs","Button","disabled","DefaultLayout","lazy","AuthRoute","render","to","App","fallback","exact","path","children","ReactDOM","React","createElement","getElementById","_token","this","localStorage","removeItem","setItem","getItem","_instance"],"mappings":"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","file":"static/js/main.79059eaa.chunk.js","sourcesContent":["import * as Yup from 'yup';\r\n\r\nYup.setLocale({\r\n  mixed: {\r\n    required: 'Este campo é obrigatório.',\r\n  },\r\n\r\n  string: {\r\n    min: ({ min }) => `Tamanho mínimo: ${min} caracteres.`,\r\n    max: ({ max }) => `Tamanho máximo: ${max} caracteres.`,\r\n    email: `Informe um e-mail válido`,\r\n  },\r\n\r\n  array: {\r\n    min: ({ min }) => `É preciso selecionar no mínimo ${min}`,\r\n    max: ({ max }) => `É preciso selecionar no máximo ${max}`,\r\n  },\r\n\r\n  number: {\r\n    max: ({ max }) => `O valor não pode ser maior que ${max}`,\r\n    min: ({ min }) => `O valor não pode ser menor que ${min}`,\r\n    integer: `O valor deve ser inteiro.`,\r\n  },\r\n});\r\n\r\nexport default Yup;\r\n","import axios from 'axios';\nimport {Auth} from \"../domain/auth/Auth\";\n\nconst vouDeVanApi = axios.create({\n  baseURL: 'http://api-da-van.tk/admin',\n  headers: {\n    'Access-Control-Allow-Origin': '*',\n  }\n});\n\nvouDeVanApi.interceptors.request.use(function (config) {\n  if (!Auth.instance.isAuthenticated) return config;\n\n  config.headers.Authorization = `Bearer ${Auth.instance.token}`\n\n  return config;\n});\n\nexport default vouDeVanApi;\n\n\n","import {FormFeedback, Input, InputProps} from \"reactstrap\";\nimport React from \"react\";\nimport {useField} from \"formik\";\nimport InputMask from \"react-input-mask\";\n\nexport interface AppInputModel extends InputProps {\n  id: string,\n  mask?: string | Array<(string | RegExp)>\n  dataTestId?: string\n}\n\n\nexport default function AppInput({id, mask, dataTestId, ...props}: AppInputModel) {\n\n  const [field, meta] = useField(id);\n  const hasError = (): boolean => {\n    return !!(meta.touched && meta.error);\n  }\n\n  if (mask) {\n    return <> <InputMask mask={mask}  {...props} {...field} data-testid={dataTestId ?? id}>\n      {(inputProps: object) => {\n        return <Input id={id} {...inputProps} invalid={hasError()}/>\n      }}\n    </InputMask>\n      {hasError() ? <FormFeedback>{meta.error}</FormFeedback> : ''}\n    </>\n  }\n\n\n  return (<>\n    <Input id={id} {...field} invalid={hasError()} {...props} data-testid={dataTestId ?? id}/>\n    {hasError() ? <FormFeedback>{meta.error}</FormFeedback> : ''}\n  </>);\n\n}\n\n","import AlertModel from \"../common/AlertModel\";\r\nimport {UncontrolledAlert} from \"reactstrap\";\r\nimport React from \"react\";\r\n\r\n\r\nexport default function AppAlert({alertModel}: { alertModel?: AlertModel }) {\r\n\r\n\r\n  return<>\r\n    {\r\n      alertModel ? <UncontrolledAlert color={alertModel.color}>{alertModel.message}</UncontrolledAlert> : null\r\n    }\r\n  </>\r\n}\r\n","import {AxiosError} from \"axios\";\r\nimport handleAxiosError from \"./handleAxiosError\";\r\n\r\nexport default interface AlertModel {\r\n  color: string\r\n  message: string\r\n}\r\n\r\n\r\nexport function alertFromAxiosError(error: AxiosError) {\r\n\r\n  return {\r\n    color: 'danger',\r\n    message: handleAxiosError(error)\r\n  }\r\n}\r\n","import {AxiosError, AxiosResponse} from \"axios\";\r\n\r\n\r\nconst messageErrors = new Set();\r\nmessageErrors.add(400);\r\nmessageErrors.add(422);\r\nmessageErrors.add(404);\r\nmessageErrors.add(500);\r\nmessageErrors.add(403);\r\n\r\nconst defaultHandler = (response: AxiosResponse | undefined) => {\r\n  return `Erro Desconhecido: ${response?.status}`\r\n}\r\n\r\nfunction handleAxiosError(error: AxiosError): string {\r\n\r\n  if (error.isAxiosError && error.response === undefined) {\r\n    return 'Ops não foi possível conectar ao servidor';\r\n  }\r\n\r\n  const response = error.response as AxiosResponse;\r\n  if (messageErrors.has(response?.status)) {\r\n    return response.data?.message;\r\n  }\r\n\r\n  return defaultHandler(response);\r\n}\r\n\r\nexport default handleAxiosError\r\n","import React from 'react';\r\n\r\nconst AppPageLoading : React.FC =  () =>{\r\n  return <div className=\"animated fadeIn pt-3 text-center\">Loading...</div>;\r\n}\r\n\r\nexport default AppPageLoading;\r\n","/*\r\n* required polyfills\r\n*/\r\nimport \"core-js\";\r\nimport 'core-js/features/set/map';\r\n\r\n/** IE9, IE10 and IE11 requires all of the following polyfills. **/\r\n// import 'core-js/es/symbol'\r\n// import 'core-js/es/object'\r\n// import 'core-js/es/function'\r\n// import 'core-js/es/parse-int'\r\n// import 'core-js/es/parse-float'\r\n// import 'core-js/es/number'\r\n// import 'core-js/es/math'\r\n// import 'core-js/es/string'\r\n// import 'core-js/es/date'\r\n// import 'core-js/es/array'\r\n// import 'core-js/es/regexp'\r\n// import 'core-js/es/map'\r\n// import 'core-js/es/weak-map'\r\n// import 'core-js/es/set'\r\n// import 'core-js/es/object'\r\n\r\n/** IE10 and IE11 requires the following for the Reflect API. */\r\n// import 'core-js/es/reflect'\r\n\r\n/** Evergreen browsers require these. **/\r\n// Used for reflect-metadata in JIT. If you use AOT (and only Angular decorators), you can remove.\r\n// import 'core-js/es/reflect'\r\n\r\n// CustomEvent() constructor functionality in IE9, IE10, IE11\r\n(function () {\r\n\r\n  if ( typeof window.CustomEvent === \"function\" ) return false\r\n\r\n  function CustomEvent ( event, params ) {\r\n    params = params || { bubbles: false, cancelable: false, detail: undefined }\r\n    var evt = document.createEvent( 'CustomEvent' )\r\n    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail )\r\n    return evt\r\n  }\r\n\r\n  CustomEvent.prototype = window.Event.prototype\r\n\r\n  window.CustomEvent = CustomEvent\r\n})()\r\n","import AppInput, {AppInputModel} from \"./AppInput\";\r\nimport {InputGroup, InputGroupAddon, InputGroupText} from \"reactstrap\";\r\nimport React from \"react\";\r\n\r\nexport interface FormInputGroupModel extends AppInputModel {\r\n  icon: string\r\n}\r\n\r\nexport default function AppInputGroup({icon, ...props}: FormInputGroupModel) {\r\n\r\n  return (\r\n    <>\r\n      <InputGroup className=\"mb-3\">\r\n        <InputGroupAddon addonType=\"prepend\">\r\n          <InputGroupText>\r\n            <i className={icon}/>\r\n          </InputGroupText>\r\n        </InputGroupAddon>\r\n        <AppInput {...props}/>\r\n      </InputGroup>\r\n    </>);\r\n}\r\n","import React, {useState} from 'react';\nimport Yup from \"../common/Yup\";\n\nimport {FormikHelpers} from \"formik/dist/types\";\nimport {useHistory, useLocation} from \"react-router\";\nimport {LoginFormModel, postLogin} from \"../domain/auth/Login\";\nimport AlertModel, {alertFromAxiosError} from \"../common/AlertModel\";\nimport {Formik} from \"formik\";\nimport {Button, Card, CardBody, CardGroup, Col, Container, Form, Row} from \"reactstrap\";\nimport AppInputGroup from \"../components/AppInputGroup\";\nimport AppAlert from \"../components/AppAlert\";\n\nconst validationSchema = Yup.object().shape({\n  email: Yup.string().max(150).email().required(),\n  password: Yup.string().max(150).required(),\n});\n\ninterface LoginFormViewModel {\n  initialValues: LoginFormModel\n  onSubmit: (values: LoginFormModel, formikHelpers: FormikHelpers<LoginFormModel>) => void | Promise<LoginFormModel>;\n  validationSchema: any,\n\n}\n\nexport default function Login() {\n\n  const history = useHistory();\n  const location = useLocation<{ from: string }>();\n\n  const [alertModel, setAlertModel] = useState<AlertModel | undefined>(undefined);\n\n\n  const initialValues: LoginFormModel = {email: \"\", password: \"\"}\n  const onSubmit = (loginFormModel: LoginFormModel, {setSubmitting}: FormikHelpers<LoginFormModel>) => {\n    setAlertModel(undefined);\n    postLogin(loginFormModel)\n      .then(() => {\n        const {from} = location.state || {from: {pathname: \"/\"}};\n        history.replace(from);\n      })\n      .catch(e => {\n        setAlertModel(alertFromAxiosError(e))\n        setSubmitting(false)\n      });\n  }\n\n  return (<div className=\"app flex-row align-items-center\">\n    <Container>\n\n      <Row className=\"justify-content-center\">\n        <Col md=\"4\">\n          <CardGroup>\n            <Card className=\"p-4\">\n              <CardBody>\n                <AppAlert alertModel={alertModel}/>\n                <LoginFormView {...{initialValues, validationSchema, onSubmit}}/>\n              </CardBody>\n            </Card>\n          </CardGroup>\n        </Col>\n      </Row>\n    </Container>\n  </div>);\n}\n\n\nfunction LoginFormView({initialValues, validationSchema, onSubmit}: LoginFormViewModel) {\n  return (<Formik\n    initialValues={initialValues}\n    validationSchema={validationSchema}\n    onSubmit={onSubmit}\n  >\n    {({handleSubmit, isSubmitting}) => {\n      return (\n        <Form onSubmit={handleSubmit}>\n\n          <h1>Login</h1>\n          <p className=\"text-muted\">Entrar na sua conta</p>\n\n          <AppInputGroup\n            icon={\"icon-user\"}\n            type=\"email\"\n            name=\"email\"\n            id=\"email\"\n            maxLength={140}\n          />\n\n          <AppInputGroup\n            type=\"password\"\n            label=\"Senha\"\n            name=\"password\"\n            id=\"password\"\n            maxLength={140}\n            icon={\"icon-lock\"}\n          />\n          <Row>\n            <Col xs=\"6\">\n              <Button type={'submit'} color=\"primary\" className=\"px-4\" disabled={isSubmitting}\n                      data-testid={\"login-botao\"}>Login</Button>\n            </Col>\n            <Col xs=\"6\" className=\"text-right\">\n              <Button color=\"link\" className=\"px-0\">Forgot password?</Button>\n            </Col>\n          </Row>\n        </Form>\n      );\n    }}\n  </Formik>);\n}\n","import vouDeVanApi from \"../../common/vouDeVanApi\";\nimport {Auth} from \"./Auth\";\n\nexport interface LoginFormModel {\n  email: String,\n  password: String\n}\n\n\nexport function postLogin(loginFormModel: LoginFormModel) {\n\n  return vouDeVanApi.post<string>('/login', loginFormModel)\n    .then(response => {\n      Auth.instance.token = response.data;\n    })\n}\n","import React, {lazy, Suspense} from 'react';\nimport {HashRouter, Redirect, Route, Switch} from 'react-router-dom';\n\nimport './scss/App.scss';\nimport AppPageLoading from './components/AppPageLoading';\nimport Login from \"./pages/Login\";\nimport {RouteProps} from \"react-router\";\nimport {Auth} from \"./domain/auth/Auth\";\n\n\nconst DefaultLayout = lazy(() => import('./containers/DefaultLayout'));\n\nconst App: React.FC = () => (\n  <HashRouter>\n    <Suspense fallback={AppPageLoading}>\n      <Switch>\n        <Route exact path=\"/login\" children={<Login/>}/>\n        <AuthRoute path=\"/\" render={props => <DefaultLayout {...props}/>}/>\n      </Switch>\n    </Suspense>\n  </HashRouter>\n)\n\n\nfunction AuthRoute(props: RouteProps) {\n\n  if (Auth.instance.isAuthenticated) {\n    return <Route {...props}/>\n  }\n\n\n  return <Route\n    {...props}\n    render={({location}) => <Redirect to={{pathname: \"/login\", state: {from: location}}}/>}\n  />\n\n\n}\n\n\nexport default App;\n","import 'react-app-polyfill/ie9'; // For IE 9-11 support\r\nimport 'react-app-polyfill/stable';\r\n// import 'react-app-polyfill/ie11'; // For IE 11 support\r\nimport './common/polyfill'\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(React.createElement(App), document.getElementById('root'));\r\n\r\n","export class Auth {\r\n\r\n  private static _instance: Auth | null = null;\r\n  private _token: string | null = null;\r\n\r\n  private constructor() {\r\n  }\r\n\r\n\r\n  static get instance(): Auth {\r\n    if (Auth._instance === null) {\r\n      Auth._instance = new Auth();\r\n    }\r\n    return Auth._instance;\r\n  }\r\n\r\n\r\n  logout() {\r\n    this.token = null;\r\n  }\r\n\r\n  set token(token) {\r\n\r\n    if (token === null) {\r\n      localStorage.removeItem('token')\r\n    } else {\r\n      localStorage.setItem('token', token)\r\n    }\r\n\r\n    this._token = token;\r\n  }\r\n\r\n  get token(): string | null {\r\n    if (this._token === null) {\r\n      this._token = localStorage.getItem('token')\r\n    }\r\n    return this._token;\r\n  }\r\n\r\n  get isAuthenticated() {\r\n    return this.token !== null;\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}