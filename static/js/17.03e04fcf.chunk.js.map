{"version":3,"sources":["pages/Empresa/Editar/index.tsx"],"names":["empresaFormModel","cnpj","email","endereco","nome","representante","telefone","EmpresaEditar","history","id","match","params","useState","initialValues","setInitialValues","isLoading","setIsLoading","undefined","alert","setAlert","useEffect","buscaEmpresaPorId","then","response","data","catch","e","color","message","handleAxiosError","alertModel","header","className","onSubmit","empresa","setSubmitting","editaEmpresa","push"],"mappings":"qPAaMA,EAAqC,CACzCC,KAAM,GACNC,MAAO,GACPC,SAAU,GACVC,KAAM,GACNC,cAAe,GACfC,SAAU,IAqCGC,UA/BkB,SAAC,GAAsB,IAArBC,EAAoB,EAApBA,QAC3BC,EAD+C,EAAXC,MACjBC,OAAOF,GADqB,EAGXG,mBAASZ,GAHE,mBAG9Ca,EAH8C,KAG/BC,EAH+B,OAInBF,oBAAS,GAJU,mBAI9CG,EAJ8C,KAInCC,EAJmC,OAK3BJ,wBAAiCK,GALN,mBAK9CC,EAL8C,KAKvCC,EALuC,KAOrDC,qBAAU,WACRD,OAASF,GACTI,YAAkBZ,GAAIa,MAAK,SAACC,GAC1BT,EAAiBS,EAASC,MAC1BR,GAAa,MACZS,OAAM,SAAAC,GAAC,OAAIP,EAAS,CAACQ,MAAO,SAAUC,QAASC,YAAiBH,UAElE,CAACjB,IAYJ,OAAQ,kBAAC,IAAD,CAASqB,WAAYZ,EAAOa,OAAQ,wCAAG,uBAAGC,UAAU,wBAAhB,eACxCjB,GAAa,kBAAC,IAAD,CAAakB,SAXf,SAACC,EAAD,GAAmF,IAAtDC,EAAqD,EAArDA,cAC1ChB,OAASF,GACTmB,YAAa3B,EAAIyB,GACdZ,MAAK,kBAAMd,EAAQ6B,KAAK,gBACxBZ,OAAM,SAACC,GACNP,EAAS,CAACQ,MAAO,SAAUC,QAASC,YAAiBH,KACrDS,GAAc,OAK4BtB,cAAeA","file":"static/js/17.03e04fcf.chunk.js","sourcesContent":["import React, {FC, useEffect, useState} from 'react';\r\nimport {RouteComponentProps} from 'react-router';\r\n\r\nimport {AxiosError} from 'axios';\r\nimport EmpresaFormModel from '../../../domain/empresa/EmpresaFormModel';\r\nimport {FormikHelpers} from 'formik';\r\nimport {buscaEmpresaPorId, editaEmpresa} from \"../../../domain/empresa/EmpresaService\";\r\nimport AppPage from \"../../../components/AppPage\";\r\nimport AlertModel from \"../../../common/AlertModel\";\r\nimport handleAxiosError from \"../../../common/handleAxiosError\";\r\nimport EmpresaForm from \"../Form\";\r\n\r\n\r\nconst empresaFormModel: EmpresaFormModel = {\r\n  cnpj: '',\r\n  email: '',\r\n  endereco: '',\r\n  nome: '',\r\n  representante: '',\r\n  telefone: '',\r\n};\r\n\r\n\r\ntype Props = RouteComponentProps<{ id: string }>;\r\n\r\nconst EmpresaEditar: FC<Props> = ({history, match}) => {\r\n  const id: string = match.params.id;\r\n\r\n  const [initialValues, setInitialValues] = useState(empresaFormModel);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [alert, setAlert] = useState<AlertModel | undefined>(undefined);\r\n\r\n  useEffect(() => {\r\n    setAlert(undefined);\r\n    buscaEmpresaPorId(id).then((response) => {\r\n      setInitialValues(response.data);\r\n      setIsLoading(false);\r\n    }).catch(e => setAlert({color: 'danger', message: handleAxiosError(e)}));\r\n\r\n  }, [id]);\r\n\r\n  const submit = (empresa: EmpresaFormModel, {setSubmitting,}: FormikHelpers<EmpresaFormModel>) => {\r\n    setAlert(undefined);\r\n    editaEmpresa(id, empresa)\r\n      .then(() => history.push('/empresas'))\r\n      .catch((e: AxiosError) => {\r\n        setAlert({color: 'danger', message: handleAxiosError(e)})\r\n        setSubmitting(false);\r\n      });\r\n  };\r\n\r\n  return (<AppPage alertModel={alert} header={<> <i className=\"fa fa-align-justify\"/> Empresas</>}>\r\n    {!isLoading && <EmpresaForm onSubmit={submit} initialValues={initialValues}/>}\r\n  </AppPage>);\r\n}\r\n\r\nexport default EmpresaEditar;\r\n"],"sourceRoot":""}