{"version":3,"sources":["common/Yup.ts","common/vouDeVanApi.js","components/AppAlert.tsx","components/AppInput.tsx","common/AlertModel.ts","common/handleAxiosError.ts","components/AppPageLoading.tsx","common/polyfill.js","components/AppInputGroup.tsx","pages/Login/LoginView.tsx","pages/Login/Login.tsx","domain/auth/Login.ts","App.tsx","index.ts","domain/auth/Auth.ts"],"names":["Yup","mixed","required","string","min","max","email","array","number","integer","vouDeVanApi","axios","create","baseURL","headers","interceptors","request","use","config","Auth","instance","isAuthenticated","Authorization","token","AppAlert","alertModel","color","message","AppInput","id","mask","props","useField","field","meta","hasError","touched","error","inputProps","invalid","alertFromAxiosError","handleAxiosError","messageErrors","Set","add","isAxiosError","undefined","response","has","status","data","defaultHandler","AppPageLoading","className","window","CustomEvent","event","params","bubbles","cancelable","detail","evt","document","createEvent","initCustomEvent","prototype","Event","AppInputGroup","icon","InputGroup","InputGroupAddon","addonType","InputGroupText","LoginView","Container","Row","Col","md","CardGroup","Card","CardBody","LoginFormView","initialValues","validationSchema","onSubmit","handleSubmit","isSubmitting","Form","type","name","maxLength","component","label","xs","Button","disabled","object","shape","password","Login","history","location","useState","setAlertModel","loginFormModel","setSubmitting","post","then","postLogin","from","state","pathname","replace","catch","e","DefaultLayout","lazy","AuthRoute","render","to","App","fallback","exact","path","ReactDOM","React","createElement","getElementById","_token","this","localStorage","removeItem","setItem","getItem","_instance"],"mappings":"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","file":"static/js/main.3439ead4.chunk.js","sourcesContent":["import * as Yup from 'yup';\r\n\r\nYup.setLocale({\r\n  mixed: {\r\n    required: 'Este campo é obrigatório.',\r\n  },\r\n\r\n  string: {\r\n    min: ({ min }) => `Tamanho mínimo: ${min} caracteres.`,\r\n    max: ({ max }) => `Tamanho máximo: ${max} caracteres.`,\r\n    email: `Informe um e-mail válido`,\r\n  },\r\n\r\n  array: {\r\n    min: ({ min }) => `É preciso selecionar no mínimo ${min}`,\r\n    max: ({ max }) => `É preciso selecionar no máximo ${max}`,\r\n  },\r\n\r\n  number: {\r\n    max: ({ max }) => `O valor não pode ser maior que ${max}`,\r\n    min: ({ min }) => `O valor não pode ser menor que ${min}`,\r\n    integer: `O valor deve ser inteiro.`,\r\n  },\r\n});\r\n\r\nexport default Yup;\r\n","import axios from 'axios';\nimport {Auth} from \"../domain/auth/Auth\";\n\nconst vouDeVanApi = axios.create({\n  baseURL: 'https://api-da-van.tk/admin/',\n  headers: {\n    'Access-Control-Allow-Origin': '*',\n  }\n});\n\nvouDeVanApi.interceptors.request.use(function (config) {\n  if (!Auth.instance.isAuthenticated) return config;\n\n  config.headers.Authorization = `Bearer ${Auth.instance.token}`\n\n  return config;\n});\n\nexport default vouDeVanApi;\n\n\n","import AlertModel from \"../common/AlertModel\";\r\nimport {UncontrolledAlert} from \"reactstrap\";\r\nimport React from \"react\";\r\n\r\n\r\nexport default function AppAlert({alertModel}: { alertModel?: AlertModel }) {\r\n\r\n\r\n  return<>\r\n    {\r\n      alertModel ? <UncontrolledAlert color={alertModel.color}>{alertModel.message}</UncontrolledAlert> : null\r\n    }\r\n  </>\r\n}\r\n","import {FormFeedback, Input, InputProps} from \"reactstrap\";\r\nimport React from \"react\";\r\nimport {useField} from \"formik\";\r\nimport InputMask from \"react-input-mask\";\r\n\r\nexport interface AppInputModel extends InputProps {\r\n  id: string,\r\n  mask?: string | Array<(string | RegExp)>\r\n}\r\n\r\n\r\nexport default function AppInput({id, mask, ...props}: AppInputModel) {\r\n\r\n  const [field, meta] = useField(id);\r\n  const hasError = (): boolean => {\r\n    return !!(meta.touched && meta.error);\r\n  }\r\n\r\n  if (mask) {\r\n    return <> <InputMask mask={mask}  {...props} {...field}  >\r\n      {(inputProps: object) => {\r\n        return <Input id={id} {...inputProps} invalid={hasError()}/>\r\n      }}\r\n    </InputMask>\r\n      {hasError() ? <FormFeedback>{meta.error}</FormFeedback> : ''}\r\n    </>\r\n  }\r\n\r\n\r\n  return (<>\r\n    <Input id={id} {...field} invalid={hasError()} {...props}/>\r\n    {hasError() ? <FormFeedback>{meta.error}</FormFeedback> : ''}\r\n  </>);\r\n\r\n}\r\n\r\n","import {AxiosError} from \"axios\";\r\nimport handleAxiosError from \"./handleAxiosError\";\r\n\r\nexport default interface AlertModel {\r\n  color: string\r\n  message: string\r\n}\r\n\r\n\r\nexport function alertFromAxiosError(error: AxiosError) {\r\n\r\n  return {\r\n    color: 'danger',\r\n    message: handleAxiosError(error)\r\n  }\r\n}\r\n","import {AxiosError, AxiosResponse} from \"axios\";\r\n\r\n\r\nconst messageErrors = new Set();\r\nmessageErrors.add(400);\r\nmessageErrors.add(422);\r\nmessageErrors.add(404);\r\nmessageErrors.add(500);\r\nmessageErrors.add(403);\r\n\r\nconst defaultHandler = (response: AxiosResponse | undefined) => {\r\n  return `Erro Desconhecido: ${response?.status}`\r\n}\r\n\r\nfunction handleAxiosError(error: AxiosError): string {\r\n\r\n  if (error.isAxiosError && error.response === undefined) {\r\n    return 'Ops não foi possível conectar ao servidor';\r\n  }\r\n\r\n  const response = error.response as AxiosResponse;\r\n  if (messageErrors.has(response?.status)) {\r\n    return response.data?.message;\r\n  }\r\n\r\n  return defaultHandler(response);\r\n}\r\n\r\nexport default handleAxiosError\r\n","import React from 'react';\r\n\r\nconst AppPageLoading : React.FC =  () =>{\r\n  return <div className=\"animated fadeIn pt-3 text-center\">Loading...</div>;\r\n}\r\n\r\nexport default AppPageLoading;\r\n","/*\r\n* required polyfills\r\n*/\r\nimport \"core-js\";\r\nimport 'core-js/features/set/map';\r\n\r\n/** IE9, IE10 and IE11 requires all of the following polyfills. **/\r\n// import 'core-js/es/symbol'\r\n// import 'core-js/es/object'\r\n// import 'core-js/es/function'\r\n// import 'core-js/es/parse-int'\r\n// import 'core-js/es/parse-float'\r\n// import 'core-js/es/number'\r\n// import 'core-js/es/math'\r\n// import 'core-js/es/string'\r\n// import 'core-js/es/date'\r\n// import 'core-js/es/array'\r\n// import 'core-js/es/regexp'\r\n// import 'core-js/es/map'\r\n// import 'core-js/es/weak-map'\r\n// import 'core-js/es/set'\r\n// import 'core-js/es/object'\r\n\r\n/** IE10 and IE11 requires the following for the Reflect API. */\r\n// import 'core-js/es/reflect'\r\n\r\n/** Evergreen browsers require these. **/\r\n// Used for reflect-metadata in JIT. If you use AOT (and only Angular decorators), you can remove.\r\n// import 'core-js/es/reflect'\r\n\r\n// CustomEvent() constructor functionality in IE9, IE10, IE11\r\n(function () {\r\n\r\n  if ( typeof window.CustomEvent === \"function\" ) return false\r\n\r\n  function CustomEvent ( event, params ) {\r\n    params = params || { bubbles: false, cancelable: false, detail: undefined }\r\n    var evt = document.createEvent( 'CustomEvent' )\r\n    evt.initCustomEvent( event, params.bubbles, params.cancelable, params.detail )\r\n    return evt\r\n  }\r\n\r\n  CustomEvent.prototype = window.Event.prototype\r\n\r\n  window.CustomEvent = CustomEvent\r\n})()\r\n","import AppInput, {AppInputModel} from \"./AppInput\";\r\nimport {InputGroup, InputGroupAddon, InputGroupText} from \"reactstrap\";\r\nimport React from \"react\";\r\n\r\nexport interface FormInputGroupModel extends AppInputModel {\r\n  icon: string\r\n}\r\n\r\nexport default function AppInputGroup({icon, ...props}: FormInputGroupModel) {\r\n\r\n  return (\r\n    <>\r\n      <InputGroup className=\"mb-3\">\r\n        <InputGroupAddon addonType=\"prepend\">\r\n          <InputGroupText>\r\n            <i className={icon}/>\r\n          </InputGroupText>\r\n        </InputGroupAddon>\r\n        <AppInput {...props}/>\r\n      </InputGroup>\r\n    </>);\r\n}\r\n","import React from 'react';\r\nimport {Button, Card, CardBody, CardGroup, Col, Container, Form, Row} from 'reactstrap';\r\nimport {FormikHelpers} from \"formik/dist/types\";\r\n\r\nimport {Field, Formik} from \"formik\";\r\n\r\nimport AppInputGroup from \"../../components/AppInputGroup\";\r\nimport {LoginFormModel} from \"../../domain/auth/Login\";\r\nimport AlertModel from \"../../common/AlertModel\";\r\nimport AppAlert from \"../../components/AppAlert\";\r\n\r\n\r\ninterface LoginViewModel extends LoginFormViewModel {\r\n  alertModel?: AlertModel\r\n}\r\n\r\nexport function LoginView({alertModel, ...props}: LoginViewModel) {\r\n\r\n  return (\r\n    <div className=\"app flex-row align-items-center\">\r\n      <Container>\r\n\r\n        <Row className=\"justify-content-center\">\r\n          <Col md=\"4\">\r\n            <CardGroup>\r\n              <Card className=\"p-4\">\r\n                <CardBody>\r\n                  <AppAlert alertModel={alertModel}/>\r\n                  <LoginFormView {...props}/>\r\n                </CardBody>\r\n              </Card>\r\n            </CardGroup>\r\n          </Col>\r\n        </Row>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface LoginFormViewModel {\r\n  initialValues: LoginFormModel\r\n  onSubmit: (values: LoginFormModel, formikHelpers: FormikHelpers<LoginFormModel>) => void | Promise<LoginFormModel>;\r\n  validationSchema: any,\r\n\r\n}\r\n\r\n\r\nfunction LoginFormView({initialValues, validationSchema, onSubmit}: LoginFormViewModel) {\r\n  return (<Formik\r\n    initialValues={initialValues}\r\n    validationSchema={validationSchema}\r\n    onSubmit={onSubmit}\r\n  >\r\n    {({handleSubmit, isSubmitting}) => {\r\n      return (\r\n        <Form onSubmit={handleSubmit}>\r\n\r\n          <h1>Login</h1>\r\n          <p className=\"text-muted\">Entrar na sua conta</p>\r\n\r\n          <Field\r\n            type=\"email\"\r\n            name=\"email\"\r\n            id=\"email\"\r\n            maxLength={140}\r\n            icon={\"icon-user\"}\r\n            component={AppInputGroup}\r\n          />\r\n\r\n          <Field\r\n            type=\"password\"\r\n            label=\"Senha\"\r\n            name=\"password\"\r\n            id=\"password\"\r\n            maxLength={140}\r\n            icon={\"icon-lock\"}\r\n            component={AppInputGroup}\r\n          />\r\n\r\n          <Row>\r\n            <Col xs=\"6\">\r\n              <Button type={'submit'} color=\"primary\" className=\"px-4\" disabled={isSubmitting}>Login</Button>\r\n            </Col>\r\n            <Col xs=\"6\" className=\"text-right\">\r\n              <Button color=\"link\" className=\"px-0\">Forgot password?</Button>\r\n            </Col>\r\n          </Row>\r\n        </Form>\r\n      );\r\n    }}\r\n  </Formik>);\r\n}\r\n\r\n\r\n","import React, {useState} from 'react';\r\nimport {LoginView} from \"./LoginView\";\r\nimport Yup from \"../../common/Yup\";\r\n\r\nimport {FormikHelpers} from \"formik/dist/types\";\r\nimport {RouteComponentProps} from \"react-router\";\r\nimport {LoginFormModel, postLogin} from \"../../domain/auth/Login\";\r\nimport AlertModel, {alertFromAxiosError} from \"../../common/AlertModel\";\r\n\r\nconst validationSchema = Yup.object().shape({\r\n  email: Yup.string().max(150).email().required(),\r\n  password: Yup.string().max(150).required(),\r\n});\r\n\r\n\r\nexport default function Login({history, location}: RouteComponentProps) {\r\n\r\n  const [alertModel, setAlertModel] = useState<AlertModel | undefined>(undefined);\r\n\r\n\r\n  const initialValues: LoginFormModel = {email: \"\", password: \"\"}\r\n  const onSubmit = (loginFormModel: LoginFormModel, {setSubmitting}: FormikHelpers<LoginFormModel>) => {\r\n    setAlertModel(undefined);\r\n\r\n    postLogin(loginFormModel)\r\n      .then(() => {\r\n        const state: any = location.state;\r\n        const {from} = state || {from: {pathname: \"/\"}};\r\n        history.replace(from);\r\n      })\r\n      .catch(e => {\r\n        setAlertModel(alertFromAxiosError(e))\r\n        setSubmitting(false)\r\n      });\r\n  }\r\n\r\n  return (<LoginView\r\n    {...{\r\n      validationSchema,\r\n      initialValues,\r\n      onSubmit,\r\n      alertModel\r\n    }}\r\n  />);\r\n}\r\n","import vouDeVanApi from \"../../common/vouDeVanApi\";\r\nimport {Auth} from \"./Auth\";\r\n\r\nexport interface LoginFormModel {\r\n  email: String,\r\n  password: String\r\n}\r\n\r\nexport function postLogin(loginFormModel: LoginFormModel) {\r\n\r\n  return vouDeVanApi.post<string>('/login', loginFormModel)\r\n    .then(response => {\r\n      Auth.instance.token = response.data;\r\n    })\r\n}\r\n","import React, {lazy, Suspense} from 'react';\r\nimport {HashRouter, Redirect, Route, Switch} from 'react-router-dom';\r\n\r\nimport './scss/App.scss';\r\nimport AppPageLoading from './components/AppPageLoading';\r\nimport Login from \"./pages/Login\";\r\nimport {RouteProps} from \"react-router\";\r\nimport {Auth} from \"./domain/auth/Auth\";\r\n\r\n\r\nconst DefaultLayout = lazy(() => import('./containers/DefaultLayout'));\r\n\r\nconst App: React.FC = () => (\r\n  <HashRouter>\r\n    <Suspense fallback={AppPageLoading}>\r\n      <Switch>\r\n        <Route exact path=\"/login\" render={props => <Login {...props}/>}/>\r\n        <AuthRoute path=\"/\" render={props => <DefaultLayout {...props}/>}/>\r\n      </Switch>\r\n    </Suspense>\r\n  </HashRouter>\r\n)\r\n\r\n\r\nfunction AuthRoute(props: RouteProps) {\r\n\r\n  if (Auth.instance.isAuthenticated) {\r\n    return <Route {...props}/>\r\n  }\r\n\r\n\r\n  return <Route\r\n    {...props}\r\n    render={({location}) => <Redirect to={{pathname: \"/login\", state: {from: location}}}/>}\r\n  />\r\n\r\n\r\n}\r\n\r\n\r\nexport default App;\r\n","import 'react-app-polyfill/ie9'; // For IE 9-11 support\r\nimport 'react-app-polyfill/stable';\r\n// import 'react-app-polyfill/ie11'; // For IE 11 support\r\nimport './common/polyfill'\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(React.createElement(App), document.getElementById('root'));\r\n\r\n","export class Auth {\r\n\r\n  private static _instance: Auth | null = null;\r\n  private _token: string | null = null;\r\n\r\n  private constructor() {\r\n  }\r\n\r\n\r\n  static get instance(): Auth {\r\n    if (Auth._instance === null) {\r\n      Auth._instance = new Auth();\r\n    }\r\n    return Auth._instance;\r\n  }\r\n\r\n\r\n  logout() {\r\n    this.token = null;\r\n  }\r\n\r\n  set token(token) {\r\n\r\n    if (token === null) {\r\n      localStorage.removeItem('token')\r\n    } else {\r\n      localStorage.setItem('token', token)\r\n    }\r\n\r\n    this._token = token;\r\n  }\r\n\r\n  get token(): string | null {\r\n    if (this._token === null) {\r\n      this._token = localStorage.getItem('token')\r\n    }\r\n    return this._token;\r\n  }\r\n\r\n  get isAuthenticated() {\r\n    return this.token !== null;\r\n  }\r\n\r\n}\r\n"],"sourceRoot":""}